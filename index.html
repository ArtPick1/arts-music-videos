<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Art's Music Videos</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <h1>Art's Music Videos</h1>
  </header>

  <main id="app" class="container">
    <noscript>This site requires JavaScript to display videos.</noscript>
  </main>

  <footer class="site-footer">
    Contact: <a href="mailto:artpicknet@gmail.com">artpicknet@gmail.com</a>
    <span class="build">Build vA21</span>
  </footer>

  <script id="song-data" type="application/json">[]</script>

  <script>
  (function(){
    "use strict";
    function getVideos(){
      try{
        return JSON.parse(document.getElementById("song-data").textContent)||[];
      }catch(e){return [];}
    }
    function ytId(url){
      var u=String(url||"");
      if(u.indexOf("watch?v=")>-1){var s=u.split("v=")[1]||"";return s.split("&")[0];}
      return (u.split("/").pop()||"").split("?")[0];
    }
    function el(n,c){var x=document.createElement(n);if(c)x.className=c;return x;}
    function renderMain(host,item){
      host.innerHTML="";
      var card=el("article","card");
      var h2=el("h2");h2.textContent=item.title||"Untitled";card.appendChild(h2);
      if(item.url){
        var player=el("div","player");
        var iframe=document.createElement("iframe");
        iframe.src="https://www.youtube.com/embed/"+ytId(item.url);
        iframe.title="YouTube video player";
        iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.allowFullscreen=true;
        player.appendChild(iframe);card.appendChild(player);
      }
      var desc=el("div","desc");desc.textContent=item.description||"";card.appendChild(desc);
      host.appendChild(card);
    }
    function renderSidebar(host,items,selected,onPick){
      host.innerHTML="";
      var wrap=el("div","sidebar");
      var h3=el("h3");h3.textContent="Previous songs";wrap.appendChild(h3);
      var ul=el("ul");
      items.forEach(function(v,i){
        if(i===selected)return;
        var li=el("li");
        var btn=el("button","song-link");btn.type="button";
        btn.textContent=v.title||"Untitled";
        btn.onclick=function(){onPick(i);window.scrollTo({top:0,behavior:"smooth"});};
        li.appendChild(btn);ul.appendChild(li);
      });
      wrap.appendChild(ul);host.appendChild(wrap);
    }
    function renderAll(idx){
      var vids=getVideos(),app=document.getElementById("app");
      app.innerHTML="";
      var main=el("section");main.id="main";
      var aside=el("aside");aside.id="sidebar";
      app.appendChild(main);app.appendChild(aside);
      if(!vids.length){main.textContent="No videos yet.";return;}
      renderMain(main,vids[idx]);
      renderSidebar(aside,vids,idx,function(n){renderMain(main,vids[n]);renderSidebar(aside,vids,n,arguments.callee);});
    }
    document.addEventListener("DOMContentLoaded",function(){renderAll(0);});
  })();
  </script>
</body>
</html>
