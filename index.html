<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Art's Music Videos</title>
  <link rel="stylesheet" href="style.css">
  <script src="videos.js"></script>
</head>
<body>
  <header class="site-header">
    <h1>Art's Music Videos</h1>
  </header>

  <main id="app" class="container">
    <noscript>This site requires JavaScript to display videos.</noscript>
  </main>

  <footer class="site-footer">
    Contact: <a href="mailto:artpicknet@gmail.com">artpicknet@gmail.com</a>
  </footer>

  <script>
  (function(){
    "use strict";

    function getVideos(){ return window.videos || []; }

    function ytId(url){
      var u = String(url||"");
      if (u.indexOf("watch?v=")>-1){ var s=u.split("v=")[1]||""; return s.split("&")[0]; }
      return (u.split("/").pop()||"").split("?")[0];
    }

    function makeIcon(){
      var span=document.createElement("span");
      span.className="icon";
      span.textContent="▶︎"; // simple reliable icon
      return span;
    }

    function renderMain(host, item){
      host.innerHTML="";
      var card=document.createElement("article"); card.className="card";
      var h2=document.createElement("h2"); h2.textContent=item.title||"Untitled"; card.appendChild(h2);
      if(item.url){
        var player=document.createElement("div"); player.className="player";
        var iframe=document.createElement("iframe");
        iframe.src="https://www.youtube.com/embed/"+ytId(item.url);
        iframe.title="YouTube video player";
        iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        iframe.allowFullscreen=true;
        player.appendChild(iframe);
        card.appendChild(player);
      }
      var desc=document.createElement("div"); desc.className="desc"; desc.textContent=item.description||"";
      card.appendChild(desc);
      host.appendChild(card);
    }

    function renderSidebar(host, items, selected, onPick){
      host.innerHTML="";
      var wrap=document.createElement("div"); wrap.className="sidebar";
      var h3=document.createElement("h3"); h3.textContent="Previous songs"; wrap.appendChild(h3);
      var ul=document.createElement("ul");
      items.forEach(function(v,i){
        if(i===selected) return;
        var li=document.createElement("li");
        var btn=document.createElement("button"); btn.className="song-link"; btn.type="button";
        btn.appendChild(makeIcon()); btn.appendChild(document.createTextNode(" " + v.title));
        btn.onclick=function(){ onPick(i); window.scrollTo({top:0,behavior:"smooth"}); };
        li.appendChild(btn); ul.appendChild(li);
      });
      wrap.appendChild(ul); host.appendChild(wrap);
    }

    function renderAll(idx){
      var vids=getVideos();
      var app=document.getElementById("app");
      app.innerHTML="";
      var main=document.createElement("section"); main.id="main";
      var aside=document.createElement("aside"); aside.id="sidebar";
      app.appendChild(main); app.appendChild(aside);
      if(!vids.length){ main.textContent="No videos yet."; return; }
      renderMain(main,vids[idx]);
      renderSidebar(aside,vids,idx,function(n){ renderMain(main,vids[n]); renderSidebar(aside,vids,n,arguments.callee); });
    }

    document.addEventListener("DOMContentLoaded",function(){ renderAll(0); });
  })();
  </script>
</body>
</html>
